<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metamask Example</title>
</head>
<body>
    <h1>This HTML file is made by JONGHEON LEE with MetaMask Docs</h1>
    <button class="checkMetamaskInstalled">Check Metamask Installed</button>
    <button class="enableEthereumButton">Connect Metamask</button>
    <button class="checkUserState" onclick="checkUserState()">Check account & network</button>
    <button class="enableButton">Connected Address</button>
    <h2>Account: <span class="showAccount"></span></h2>

    <script>
        const checkMetamaskInstalled = document.querySelector('.checkMetamaskInstalled');
            checkMetamaskInstalled.addEventListener('click', () => {
            //Will Start the metamask extension
            if (typeof window.ethereum !== 'undefined') {
                console.log('MetaMask is installed!', ethereum.isMetaMask);
            }
        });

        const ethereumButton = document.querySelector('.enableEthereumButton');
            ethereumButton.addEventListener('click', () => {
            //Will Start the metamask extension
            ethereum.request({ method: 'eth_requestAccounts' });
        });

        async function checkUserState(){
            // ethereum.request({ method: 'eth_requestAccounts' });
            const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
            const account = accounts[0];
            const network = ethereum.networkVersion;
            console.log("accounts : ", accounts, "network : ", network)
        }

        const enableButton = document.querySelector('.enableButton');
        const showAccount = document.querySelector('.showAccount');

        enableButton.addEventListener('click', () => {
            getAccount();
        });

        async function getAccount() {
        const accounts = await ethereum.request({ method: 'eth_requestAccounts' });
        const account = accounts[0];
        showAccount.innerHTML = account;
        }
        </script>
</body>
</html>
<!-- Reference
https://docs.metamask.io/guide/getting-started.html -->